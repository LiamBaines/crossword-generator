(this["webpackJsonpcrossword-generator"]=this["webpackJsonpcrossword-generator"]||[]).push([[0],{20:function(t,e,r){},22:function(t,e,r){},23:function(t,e,r){"use strict";r.r(e);var s=r(0),a=r(4),n=r.n(a),i=r(9),c=r.n(i),o=(r(20),r(5)),u=r(10),d=r(2),h=r(14),l=r(12),v=[[1,1,1,1,1,1,0,4,4,4,4,4,4],[0,0,0,0,0,0,0,0,0,0,0,0,0],[9,9,9,9,9,9,9,0,0,0,0,0,0],[0,0,0,0,0,0,10,10,10,10,10,10,10],[11,11,11,11,11,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,12,12,12,12,12],[0,0,0,0,14,14,14,14,14,0,0,0,0],[15,15,15,15,15,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,17,17,17,17,17],[18,18,18,18,18,18,18,0,0,0,0,0,0],[0,0,0,0,0,0,20,20,20,20,20,20,20],[0,0,0,0,0,0,0,0,0,0,0,0,0],[21,21,21,21,21,21,0,22,22,22,22,22,22]],f=[["?","?","?","?","?","?","x","?","?","?","?","?","?"],["?","x","?","x","?","x","?","x","?","x","?","x","?"],["?","?","?","?","?","?","?","x","?","x","?","x","?"],["?","x","?","x","?","x","?","?","?","?","?","?","?"],["?","?","?","?","?","x","?","x","?","x","x","x","?"],["?","x","?","x","x","x","?","x","?","?","?","?","?"],["x","x","?","x","?","?","?","?","?","x","?","x","x"],["?","?","?","?","?","x","?","x","x","x","?","x","?"],["?","x","x","x","?","x","?","x","?","?","?","?","?"],["?","?","?","?","?","?","?","x","?","x","?","x","?"],["?","x","?","x","?","x","?","?","?","?","?","?","?"],["?","x","?","x","?","x","?","x","?","x","?","x","?"],["?","?","?","?","?","?","x","?","?","?","?","?","?"]],g=[[1,0,2,0,3,0,0,0,5,0,6,0,7],[1,0,2,0,3,0,8,0,5,0,6,0,7],[1,0,2,0,3,0,8,0,5,0,6,0,7],[1,0,2,0,3,0,8,0,5,0,6,0,7],[1,0,2,0,3,0,8,0,5,0,0,0,7],[1,0,2,0,0,0,8,0,5,0,13,0,7],[0,0,2,0,14,0,8,0,5,0,13,0,0],[15,0,2,0,14,0,8,0,0,0,13,0,16],[15,0,0,0,14,0,8,0,17,0,13,0,16],[15,0,19,0,14,0,8,0,17,0,13,0,16],[15,0,19,0,14,0,8,0,17,0,13,0,16],[15,0,19,0,14,0,8,0,17,0,13,0,16],[15,0,19,0,14,0,0,0,17,0,13,0,16]],w=[[1,0,2,0,3,0,0,4,5,0,6,0,7],[0,0,0,0,0,0,8,0,0,0,0,0,0],[9,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,10,0,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,12,0,13,0,0],[0,0,0,0,14,0,0,0,0,0,0,0,0],[15,0,0,0,0,0,0,0,0,0,0,0,16],[0,0,0,0,0,0,0,0,17,0,0,0,0],[18,0,19,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,20,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[21,0,0,0,0,0,0,22,0,0,0,0,0]],x=[[8,"down"],[9,"across"],[3,"down"],[1,"down"],[1,"across"],[11,"across"],[2,"down"],[15,"down"],[15,"across"],[18,"across"],[19,"down"],[21,"across"],[14,"down"],[14,"across"],[5,"down"],[4,"across"],[6,"down"],[10,"across"],[7,"down"],[12,"across"],[13,"down"],[17,"across"],[22,"across"],[16,"down"],[20,"across"],[17,"down"]],b=function t(e,r,s){Object(o.a)(this,t),this.answer=e,this.across=r,this.down=s},p=r(6);var m=function(){var t,e="",r=this.lastAdded.pop(),s=Object(p.a)(r);try{for(s.s();!(t=s.n()).done;){var a=t.value;e=e.concat(this.values[a[0]][a[1]].answer),this.values[a[0]][a[1]].answer="?"}}catch(n){s.e(n)}finally{s.f()}};var j=function(t,e){for(var r=[],s=0;s<13;s++)for(var a=0;a<13;a++)this.values[s][a][e]==t&&r.push([s,a]);return r.length>0?r:void 0},k=r(1),O=r.n(k),y=r(13),N=r(3);function C(){return(C=Object(N.a)(O.a.mark((function t(){var e,r,s,a,n,i,c,o,u,d=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(26!=(e=d.length>0&&void 0!==d[0]?d[0]:0)){t.next=5;break}return t.abrupt("return",this);case 5:return r=Object(y.a)(this.fillOrder[e],2),s=r[0],a=r[1],t.next=8,this.getSuccessors(s,a);case 8:n=t.sent,i=Object(p.a)(n),t.prev=10,i.s();case 12:if((c=i.n()).done){t.next=25;break}return o=c.value,this.insert(s,a,o),t.next=17,this.generate(e+1);case 17:if(!1===(u=t.sent)){t.next=22;break}return t.abrupt("return",u);case 22:this.backtrack();case 23:t.next=12;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(10),i.e(t.t0);case 30:return t.prev=30,i.f(),t.finish(30);case 33:return t.abrupt("return",!1);case 34:case"end":return t.stop()}}),t,this,[[10,27,30,33]])})))).apply(this,arguments)}var A=function(){return C.apply(this,arguments)},S=r(11),q=r.n(S);var D=function(t){for(var e=0;e<t.length;e++)if(t[e].charCodeAt()<97||t.charCodeAt()>122)return!1;return!0};var M=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),s=[t[r],t[e]];t[e]=s[0],t[r]=s[1]}};function R(){return(R=Object(N.a)(O.a.mark((function t(e,r){var s,a,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=this.wordAt(e,r),a="https://api.datamuse.com/words?sp=".concat(s,"&md=d&max=500"),n=q.a.get(a).then((function(t){var a=t.filter((function(t){return t.defs&&1==D(t.word)&&t.score>400&&void 0==t.defHeadword})).map((function(t){var e=t.word.toUpperCase().split(""),r=t.defs[0];return"("==(r=(r=r.substr(r.indexOf(String.fromCharCode(9))+1)).substr(0,1).toUpperCase().concat(r.substr(1)).concat(" (".concat(t.word.length,")"))).substr(0,1)&&(r="(".concat(r.substr(1,1).toUpperCase()).concat(r.substr(2))),{word:e,def:r}}));return M(a),s.split("").some((function(t){return"?"==t}))||console.log("(".concat(e," ").concat(r,") parameter ").concat(s," returned ").concat(a.map((function(t){return t.word.join("")})))),a})),t.next=5,n;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var I=function(t,e){return R.apply(this,arguments)};var U=function(t,e,r){for(var s=this.coordsAt(t,e),a=[],n=0;n<r.word.length;n++){var i=s[n];"?"==this.values[i[0]][i[1]].answer&&a.push(i),this.values[i[0]][i[1]].answer=r.word[n]}this.lastAdded.push(a),this.definitions[e][t]=r.def};var L=function(t,e){var r,s=this.coordsAt(t,e),a="",n=Object(p.a)(s);try{for(n.s();!(r=n.n()).done;){var i=r.value;a=a.concat(this.values[i[0]][i[1]].answer)}}catch(c){n.e(c)}finally{n.f()}return a},V=function t(){Object(o.a)(this,t),this.backtrack=m.bind(this),this.coordsAt=j.bind(this),this.generate=A.bind(this),this.getSuccessors=I.bind(this),this.insert=U.bind(this),this.wordAt=L.bind(this),this.lastAdded=[],this.fillOrder=x,this.definitions={across:{},down:{}},this.values=[];for(var e=0;e<13;e++){for(var r=[],s=0;s<13;s++){var a=f[e][s],n=v[e][s],i=g[e][s];r.push(new b(a,n,i))}this.values.push(r)}};var G=function(t){return Object(s.jsx)("div",{className:"nav",children:Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:Object(s.jsx)("tr",{children:Object(s.jsxs)("td",{children:[Object(s.jsx)("button",{onClick:t.generate,children:"New crossword"}),Object(s.jsx)("button",{onClick:t.check,children:"Check"}),Object(s.jsx)("button",{onClick:t.reveal,children:"I give up!"})]})})})})})};var H=function(t){var e;return e=1==t.loading?"Loading...":1==t.locked?"Score: ".concat(t.score):"".concat(t.active.num,". ").concat(t.grid.definitions[t.active.dir][t.active.num]),Object(s.jsx)("div",{className:"clue",children:Object(s.jsx)("p",{children:e})})};var E=function(t){return Object(s.jsx)("td",{style:{backgroundColor:"black"}})};var J=function(t){var e,r="x"!==t.square.guess?t.square.guess:"",a=0===w[t.rowNum][t.colNum]?"":w[t.rowNum][t.colNum],n="whitesquare";0==t.locked&&(t.square[t.active.dir]==t.active.num&&(n="lightbluesquare"),t.active.row==t.rowNum&&t.active.col==t.colNum&&(n="bluesquare")),1==t.locked&&(1==t.square.corrected&&(e="red"),1==t.success&&(e="#08c90f"));var i=1==t.loading?(.05*t.rowNum).toString().concat("s"):"0s",c=1==t.loading?"2s":"1s",o=1==t.loading?"infinite":"",u={color:e,cursor:"pointer",animationName:t.square.animation,animationDuration:c,animationDelay:i,animationIterationCount:o};return 1==t.loading&&(u.animationName="loading"),Object(s.jsxs)("td",{className:n,style:u,onClick:function(){return t.select(t.rowNum,t.colNum)},children:[Object(s.jsx)("span",{className:"number",children:a}),Object(s.jsx)("div",{className:"letter",children:r})]})};var K=function(t){for(var e=[],r=0;r<t.row.length;r++)"x"===t.row[r].answer?e.push(E()):e.push(J({active:t.active,square:t.row[r],loading:t.loading,locked:t.locked,rowNum:t.rowNum,colNum:r,select:t.select,success:t.success}));return Object(s.jsx)("tr",{children:e})};var P=function(t){for(var e=[],r=0;r<t.grid.values.length;r++)e.push(K({active:t.active,animation:t.animation,row:t.grid.values[r],loading:t.loading,locked:t.locked,rowNum:r,select:t.select,success:t.success}));return Object(s.jsx)("table",{className:"grid",children:e})};var B=function(t){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("header",{children:G(t)}),Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{id:"wrap",children:[P(t),H(t)]})})]})};var T=function(t,e,r,s,a){var n=this.state.grid.values[e][r];return 0!==n.across&&0!==n.down&&e==s&r==a?"across"==t?"down":"across":"across"==t&&0==n.across?"down":"down"==t&&0==n.down?"across":t};function z(){return(z=Object(N.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.state.loading||0!=this.state.locked){t.next=6;break}return t.next=3,this.ResetAnimation();case 3:return t.next=5,this.setState((function(t){for(var e=0,r=0;r<t.height;r++)for(var s=0;s<t.width;s++){var a=t.grid.values[r][s];"x"!=a.answer&&a.guess!=a.answer&&(a.guess&&(a.animation="incorrect"),e++,a.guess=void 0)}if(0==e){for(var n=0,i=0;i<t.height;i++)for(var c=0;c<t.height;c++){var o=t.grid.values[i][c];o.answer==o.guess&&(o.animation="correct",n++)}return{grid:t.grid,score:n,locked:!0,success:!0}}return{grid:t.grid}}));case 5:setTimeout(this.ResetAnimation,1e3);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var F=function(){return z.apply(this,arguments)};var Q=function(){this.setState((function(t){return t.grid.values[t.active.row][t.active.col].guess="x",{grid:t.grid}}))};function W(){return(W=Object(N.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState((function(){return{active:{row:0,col:0,num:1,dir:"across"},grid:new V,loading:!0,score:0}}));case 2:return t.next=4,this.state.grid.generate();case 4:e=t.sent,this.setState((function(){return{grid:e,width:e.values[0].length,height:e.values.length,locked:!1,loading:!1,success:!1}}));case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var X=function(){return W.apply(this,arguments)};function Y(){return(Y=Object(N.a)(O.a.mark((function t(e){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(this.state.grid.values[0][0].animation),e.keyCode>36&&e.keyCode<41&&this.MoveActive(e.key),0==this.state.locked&&0==this.state.loading&&(e.keyCode>64&&e.keyCode<123&&this.InputCharacter(e.key),8!=e.keyCode&&46!=e.keyCode||("x"!=this.state.grid.values[this.state.active.row][this.state.active.col].guess?this.Delete():(r="across"==this.state.active.dir?"ArrowLeft":"ArrowUp",this.MoveActive(r).then(this.Delete()))));case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var Z=function(t){return Y.apply(this,arguments)};var $=function(t){var e=this;this.setState((function(r){var s=e.state.active.row,a=e.state.active.col;return r.grid.values[s][a].guess=t.toUpperCase(),r.grid.values[s][a].animation="none","across"==r.active.dir&&e.ValidNeighbour(s,a,"right")&&r.active.col++,"down"==r.active.dir&&e.ValidNeighbour(s,a,"down")&&r.active.row++,{grid:r.grid,guesses:r.guesses,colours:r.colours,active:r.active,animation:""}}))};function _(){return(_=Object(N.a)(O.a.mark((function t(e){var r,s,a,n,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e[5].toLowerCase().concat(e.slice(6)),s=this.state.active.row,a=this.state.active.col,this.ValidNeighbour(s,a,r)){t.next=5;break}return t.abrupt("return");case 5:"up"==r&&(n=s-1,i=a),"down"==r&&(n=s+1,i=a),"left"==r&&(n=s,i=a-1),"right"==r&&(n=s,i=a+1),this.Select(n,i);case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var tt=function(t){return _.apply(this,arguments)};var et=function(){console.log("Revealing"),0==this.state.locked&&0==this.state.loading&&(this.state.grid.values.every((function(t){return t.every((function(t){return"x"==t.answer||t.answer==t.guess}))}))&&this.Success(),this.setState((function(t){for(var e=0,r=0;r<t.height;r++)for(var s=0;s<t.width;s++){var a=t.grid.values[r][s];a.guess==a.answer?(a.animation="correct",e++):(a.guess=a.answer,a.animation="incorrect",a.corrected=!0)}return{grid:t.grid,score:e,locked:!0}})))};function rt(){return(rt=Object(N.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState((function(t){for(var e=0;e<t.height;e++)for(var r=0;r<t.width;r++)t.grid.values[e][r].animation="none";return{grid:t.grid}}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var st=function(){return rt.apply(this,arguments)};var at=function(t,e){var r={};r.active={row:t,col:e,dir:this.state.active.dir,num:this.state.active.num};var s={row:this.state.active.row,col:this.state.active.col};r.active.dir=this.AdjustDirection(r.active.dir,t,e,s.row,s.col),r.active.num=this.state.grid.values[t][e][r.active.dir],this.setState((function(){return{active:r.active,colours:r.colours}}))};var nt=function(){this.setState((function(t){for(var e=0,r=0;r<t.height;r++)for(var s=0;s<t.width;s++){t.grid.values[r][s].animation="correct",e++}return{grid:t.grid,score:e,locked:!0,success:!0}}))};var it=function(t,e,r){if("up"==r){if(0==t)return!1;if("x"==this.state.grid.values[t-1][e].answer)return!1}if("down"==r){if(t==this.state.height-1)return!1;if("x"==this.state.grid.values[t+1][e].answer)return!1}if("left"==r){if(0==e)return!1;if("x"==this.state.grid.values[t][e-1].answer)return!1}if("right"==r){if(e==this.state.width-1)return!1;if("x"==this.state.grid.values[t][e+1].answer)return!1}return!0},ct=(r(22),function(t){Object(h.a)(r,t);var e=Object(l.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).AdjustDirection=T.bind(Object(d.a)(s)),s.Check=F.bind(Object(d.a)(s)),s.Delete=Q.bind(Object(d.a)(s)),s.Generate=X.bind(Object(d.a)(s)),s.HandleKeyPress=Z.bind(Object(d.a)(s)),s.InputCharacter=$.bind(Object(d.a)(s)),s.MoveActive=tt.bind(Object(d.a)(s)),s.ResetAnimation=st.bind(Object(d.a)(s)),s.Reveal=et.bind(Object(d.a)(s)),s.Select=at.bind(Object(d.a)(s)),s.Success=nt.bind(Object(d.a)(s)),s.ValidNeighbour=it.bind(Object(d.a)(s)),document.addEventListener("keydown",s.HandleKeyPress),s.state={active:{row:0,col:0,num:1,dir:"across"},grid:new V,height:13,loading:!0,locked:!1,score:0,success:!1,width:13},s}return Object(u.a)(r,[{key:"render",value:function(){return Object(s.jsx)(B,{active:this.state.active,animation:this.state.animation,check:this.Check,generate:this.Generate,grid:this.state.grid,loading:this.state.loading,locked:this.state.locked,reveal:this.Reveal,score:this.state.score,select:this.Select,success:this.state.success})}},{key:"componentDidMount",value:function(){this.Generate()}}]),r}(n.a.Component));c.a.render(Object(s.jsx)(ct,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d0a9783c.chunk.js.map